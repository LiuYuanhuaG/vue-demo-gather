{"version":3,"file":"js/118.451d97ac.js","mappings":"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","sources":["webpack://vue-demo-gather/./src/views/InfiniteList/SelectInfinite/SelectInfinite.vue","webpack://vue-demo-gather/./src/views/InfiniteList/SelectInfinite/SelectInfinite.vue?f062","webpack://vue-demo-gather/./src/views/InfiniteList/SelectInfinite/Index.vue","webpack://vue-demo-gather/./src/views/InfiniteList/SelectInfinite/Index.vue?5a11"],"sourcesContent":["import { unref as _unref, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeStyle as _normalizeStyle, renderList as _renderList, Fragment as _Fragment, toDisplayString as _toDisplayString, createCommentVNode as _createCommentVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-c66aa694\"), n = n(), _popScopeId(), n);\n\nconst _hoisted_1 = {\n  class: \"select\"\n};\nconst _hoisted_2 = {\n  class: \"s select-box\"\n};\nconst _hoisted_3 = {\n  class: \"s select-head\"\n};\nconst _hoisted_4 = [\"value\"];\n\nconst _hoisted_5 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"svg\", {\n  viewBox: \"0 0 1024 1024\",\n  xmlns: \"http://www.w3.org/2000/svg\"\n}, [/*#__PURE__*/_createElementVNode(\"path\", {\n  fill: \"currentColor\",\n  d: \"m488.832 344.32-339.84 356.672a32 32 0 0 0 0 44.16l.384.384a29.44 29.44 0 0 0 42.688 0l320-335.872 319.872 335.872a29.44 29.44 0 0 0 42.688 0l.384-.384a32 32 0 0 0 0-44.16L535.168 344.32a32 32 0 0 0-46.336 0z\"\n})], -1));\n\nconst _hoisted_6 = [_hoisted_5];\n\nconst _hoisted_7 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"select-bar\"\n}, [/*#__PURE__*/_createElementVNode(\"span\")], -1));\n\nconst _hoisted_8 = {\n  class: \"select-value-body\"\n};\nconst _hoisted_9 = {\n  class: \"s search-input\"\n};\n\nconst _hoisted_10 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"i\", {\n  class: \"s\"\n}, null, -1));\n\nconst _hoisted_11 = [\"onClick\"];\nconst _hoisted_12 = {\n  key: 1,\n  class: \"none\"\n};\nimport { ref, reactive, computed, onMounted, watch } from 'vue';\nexport default {\n  __name: 'SelectInfinite',\n  props: {\n    // 获取真实显示列表数据\n    arr: {\n      type: Array,\n      default: () => []\n    },\n    // 列表item的高度\n    itemSize: {\n      type: Number,\n      default: 34\n    },\n    // 结束索引\n    end: {\n      type: Number,\n      default: 0\n    },\n    // 起始索引\n    start: {\n      type: Number,\n      default: 0\n    },\n    //替换数据字段\n    substitute: {\n      type: Object,\n      default: () => ({\n        key: 'id',\n        title: 'title',\n        content: 'content'\n      })\n    },\n    // 回到顶部按钮位置\n    scrollTopBtnPos: {\n      type: Number,\n      default: 200\n    },\n    // 初始 选项列表高度\n    visListHeight: {\n      type: Number,\n      default: 150\n    }\n  },\n\n  setup(__props) {\n    const props = __props;\n    const value = ref(''); // 可显示的列表项数\n\n    let _visibleCount = 0; // 偏移量\n\n    let _startOffset = reactive(0); // 起始索引\n\n\n    let _start = ref(props.start); // 结束索引\n\n\n    let _end = ref(props.end); // 列表item的高度\n\n\n    let _itemSize = reactive(props.itemSize); // 滚动盒子实例\n\n\n    let _$refs = ref(); // 可视区域高度\n\n\n    let _screenHeight = ref(props.visListHeight); // 是否展示列表\n\n\n    let IsBodyShowRef = ref(false); // 下拉框input的值\n\n    let valueRef = ref(''); // 下拉框input元素\n\n    let input_s = ref(''); //搜索input\n\n    let search_input = ref(); //所有数据\n\n    let allData = ref(props.arr); // 列表总高度\n\n    function listHeight() {\n      return allData.value.length * _itemSize;\n    } // 偏移量对应的style\n\n\n    function getTransform() {\n      return `translate3d(0,${_startOffset}px,0)`;\n    }\n\n    const _visibleData = computed({\n      get: () => {\n        // 3. 当 name 的值被修改后，触发 get 方法\n        return props.arr.slice(_start.value, Math.min(_end.value, allData.value.length));\n      }\n    });\n\n    function scrollEvent(e) {\n      // 当前滚动位置\n      const scrollTop = _$refs.value.scrollTop; // 此时的开始索引\n\n      _start.value = Math.floor(scrollTop / _itemSize); // 此时的结束索引\n\n      _end.value = _start.value + _visibleCount; // 此时的偏移量\n\n      _startOffset = scrollTop - scrollTop % _itemSize;\n    }\n\n    const valueBodyHeight = computed({\n      get: () => {\n        // 3. 当 name 的值被修改后，触发 get 方法\n        console.log(`${_itemSize * _visibleData.value.length}px`);\n        return `${_itemSize * _visibleData.value.length}px`;\n      }\n    }); // 打开列表展示\n\n    function selectClick(e) {\n      e.stopPropagation();\n      input_s.value && input_s.value.focus();\n      IsBodyShowRef.value = !IsBodyShowRef.value;\n    } // 每一个元素点击\n\n\n    function itemClick(val) {\n      valueRef.value = val.value;\n    }\n\n    function searchChange(e) {\n      let val = e.target.value;\n\n      if (!val) {\n        allData.value = props.arr;\n      } else {\n        allData.value = allData.value.filter(item => {\n          var reg = new RegExp(val);\n          return reg.test(item.content);\n        });\n        console.log(allData.value);\n      }\n    } // watch()\n\n\n    onMounted(() => {\n      document.onclick = function (argument) {\n        if (!argument.target.classList.contains('s')) {\n          IsBodyShowRef.value = false;\n        }\n      }; // _screenHeight.value = _$refs.value.parentNode.clientHeight || document.documentElement.clientHeight || document.body.clientHeight;\n      // if (props.arr.length * _itemSize <= props.visListHeight) {\n      // }\n      // 可显示的列表项数\n\n\n      _visibleCount = Math.ceil(_screenHeight.value / _itemSize);\n\n      if (allData.value.length < _visibleCount) {\n        _end.value = _start.value + allData.value.length;\n      } else {\n        _end.value = _start.value + _visibleCount;\n      }\n    });\n    return (_ctx, _cache) => {\n      return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"input\", {\n        ref_key: \"input_s\",\n        ref: input_s,\n        value: _unref(valueRef),\n        onClick: selectClick\n      }, null, 8, _hoisted_4), _createElementVNode(\"i\", {\n        class: \"s inputIcon\",\n        onClick: selectClick,\n        style: _normalizeStyle({\n          transform: `rotate(${_unref(IsBodyShowRef) ? '180deg' : '0deg'})`\n        })\n      }, _hoisted_6, 4)]), _createElementVNode(\"div\", {\n        class: \"s select-body\",\n        style: _normalizeStyle({\n          display: _unref(IsBodyShowRef) ? 'block' : 'none',\n          top: 'auto'\n        })\n      }, [_hoisted_7, _createElementVNode(\"div\", _hoisted_8, [_createElementVNode(\"div\", _hoisted_9, [_createElementVNode(\"input\", {\n        ref_key: \"search_input\",\n        ref: search_input,\n        onChange: searchChange,\n        class: \"s\",\n        type: \"text\",\n        placeholder: \"搜索\"\n      }, null, 544), _hoisted_10]), _createElementVNode(\"div\", {\n        class: \"s value-body\",\n        ref_key: \"_$refs\",\n        ref: _$refs,\n        onScroll: scrollEvent,\n        style: _normalizeStyle({\n          height: _unref(valueBodyHeight)\n        })\n      }, [_createElementVNode(\"div\", {\n        class: \"infinite-list-phantom\",\n        style: _normalizeStyle({\n          height: `${listHeight()}px`\n        })\n      }, null, 4), _unref(_visibleData).length ? (_openBlock(), _createElementBlock(\"div\", {\n        key: 0,\n        class: \"select-list-body\",\n        style: _normalizeStyle({\n          transform: getTransform()\n        })\n      }, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(_visibleData), (item, i) => {\n        return _openBlock(), _createElementBlock(\"li\", {\n          onClick: $event => itemClick(item),\n          key: i,\n          style: _normalizeStyle({\n            height: `${__props.itemSize - 2}px`\n          })\n        }, _toDisplayString(item.title), 13, _hoisted_11);\n      }), 128))], 4)) : (_openBlock(), _createElementBlock(\"div\", _hoisted_12, \"暂无匹配选项\"))], 36)])], 4)])]);\n    };\n  }\n\n};","/* unplugin-vue-components disabled */import script from \"./SelectInfinite.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./SelectInfinite.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./SelectInfinite.vue?vue&type=style&index=0&id=c66aa694&lang=scss&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\Administrator\\\\Desktop\\\\mycode\\\\vue-demo-gather\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-c66aa694\"]])\n\nexport default __exports__","import { unref as _unref, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, withCtx as _withCtx, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"box_L\"\n};\nimport router from '@/router';\nimport SelectInfinite from './SelectInfinite';\nimport { reactive } from 'vue';\nexport default {\n  __name: 'Index',\n\n  setup(__props) {\n    let arr = reactive([]);\n\n    for (let index = 0; index < 20000; index++) {\n      arr.push({\n        id: index,\n        value: index,\n        title: `坤坤吃了 ${index} /碗`,\n        content: `坤坤吃了 ${index} /碗`\n      });\n    }\n\n    const handleClicks = path => {\n      console.log(path);\n      router.push(`/about/${path}`);\n    };\n\n    return (_ctx, _cache) => {\n      return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createVNode(_unref(SelectInfinite), {\n        arr: _unref(arr)\n      }, {\n        content: _withCtx(({\n          itemData\n        }) => [_createElementVNode(\"div\", null, _toDisplayString(itemData.title), 1)]),\n        _: 1\n      }, 8, [\"arr\"])]);\n    };\n  }\n\n};","/* unplugin-vue-components disabled */import script from \"./Index.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Index.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./Index.vue?vue&type=style&index=0&id=ba0dd0c6&lang=scss\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["_withScopeId","n","_hoisted_1","class","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_","viewBox","xmlns","fill","d","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","key","__name","props","arr","type","Array","default","itemSize","Number","end","start","substitute","Object","title","content","scrollTopBtnPos","visListHeight","setup","__props","_visibleCount","_startOffset","_start","_end","_itemSize","_$refs","_screenHeight","IsBodyShowRef","valueRef","input_s","search_input","allData","listHeight","value","length","getTransform","_visibleData","get","slice","Math","min","scrollEvent","e","scrollTop","floor","valueBodyHeight","console","log","selectClick","stopPropagation","focus","itemClick","val","searchChange","target","filter","item","reg","RegExp","test","document","onclick","argument","classList","contains","ceil","_ctx","_cache","ref_key","ref","onClick","style","transform","display","top","onChange","placeholder","onScroll","height","i","$event","__exports__","index","push","id","SelectInfinite","itemData"],"sourceRoot":""}