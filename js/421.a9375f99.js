"use strict";(self["webpackChunkvue_demo_gather"]=self["webpackChunkvue_demo_gather"]||[]).push([[421],{80421:function(e,t,l){l.r(t),l.d(t,{default:function(){return A}});var a=l(59969),s=(l(72942),l(83429),l(41015)),o=(l(11758),l(26699),l(73396)),n=l(87139),r=l(44870),i=l(49242),p=l(47178),u=l(31932),c=l(56265),d=l.n(c);const v=e=>((0,o.dD)("data-v-2a72b297"),e=e(),(0,o.Cn)(),e),_=["limit","multiple","accept"],g=v((()=>(0,o._)("div",{class:"up_svg"},[(0,o._)("svg",{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},[(0,o._)("path",{fill:"currentColor",d:"M544 864V672h128L512 480 352 672h128v192H320v-1.6c-5.376.32-10.496 1.6-16 1.6A240 240 0 0 1 64 624c0-123.136 93.12-223.488 212.608-237.248A239.808 239.808 0 0 1 512 192a239.872 239.872 0 0 1 235.456 194.752c119.488 13.76 212.48 114.112 212.48 237.248a240 240 0 0 1-240 240c-5.376 0-10.56-1.28-16-1.6v1.6H544z"})])],-1))),f=v((()=>(0,o._)("div",{class:"up__text"},[(0,o.Uk)(" 将文件拖到此区域，或 "),(0,o._)("em",null,"点击上传")],-1))),m=v((()=>(0,o._)("div",{class:"up_tip"}," 文件格式为.pdf,.xls,.xlsx,.docx,.doc，每个附件大小不能超过3M ",-1))),w={class:"up_preview"},h=v((()=>(0,o._)("svg",{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg","data-v-78e17ca8":""},[(0,o._)("path",{fill:"currentColor",d:"M832 384H576V128H192v768h640V384zm-26.496-64L640 154.496V320h165.504zM160 64h480l256 256v608a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V96a32 32 0 0 1 32-32zm160 448h384v64H320v-64zm0-192h160v64H320v-64zm0 384h384v64H320v-64z"})],-1))),y={class:"up_jd"},x={class:"up_item_name"},z={key:0,viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},k=v((()=>(0,o._)("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768zm0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896z"},null,-1))),C=v((()=>(0,o._)("path",{fill:"currentColor",d:"M745.344 361.344a32 32 0 0 1 45.312 45.312l-288 288a32 32 0 0 1-45.312 0l-160-160a32 32 0 1 1 45.312-45.312L480 626.752l265.344-265.408z"},null,-1))),U=[k,C],H={key:1,viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},L=v((()=>(0,o._)("path",{fill:"currentColor",d:"m466.752 512-90.496-90.496a32 32 0 0 1 45.248-45.248L512 466.752l90.496-90.496a32 32 0 1 1 45.248 45.248L557.248 512l90.496 90.496a32 32 0 1 1-45.248 45.248L512 557.248l-90.496 90.496a32 32 0 0 1-45.248-45.248L466.752 512z"},null,-1))),D=v((()=>(0,o._)("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768zm0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896z"},null,-1))),b=[L,D],S={class:"up_item_clos"},P=["onClick"],E=v((()=>(0,o._)("path",{fill:"currentColor",d:"M764.288 214.592 512 466.88 259.712 214.592a31.936 31.936 0 0 0-45.12 45.12L466.752 512 214.528 764.224a31.936 31.936 0 1 0 45.12 45.184L512 557.184l252.288 252.288a31.936 31.936 0 0 0 45.12-45.12L557.12 512.064l252.288-252.352a31.936 31.936 0 1 0-45.12-45.184z"},null,-1))),I=[E];var M={__name:"DropUpload",props:{httpOption:{default:()=>({})},accept:{default:"*"},limit:{default:""},multiple:{default:!1},onProgress:{default:()=>()=>!0,type:Function,required:!1}},emits:["change","clear"],setup(e,{expose:t,emit:l}){const a=e;let{type:s,httpOption:i,onProgress:c,limit:v,multiple:k,accept:C}=(0,r.BK)(a),L=(0,r.qj)([]),D=(0,r.iH)(),E=(0,r.iH)();(0,o.YP)(L,(e=>{let t=(0,r.IU)(e);if(l("change",t),i.value.url)for(let l=0;l<t.length;l++){const e=t[l];V(e,l)}else l("change",t)}),{deep:!0});const M=()=>{L.splice(0,L.length)};t({clear:M});const W=e=>{E.value.click()},V=async({file:e,isHttp:t,progress:l,type:a},s)=>{if(t)return;let{url:o,data:n,fileKey:r,token:u}=i.value;const c=new FormData;c.append(r,e),n.forEach((e=>{c.append(e.name,e.value)})),d()({method:"post",url:o,data:c,headers:{Authorization:u??"","CUSTOMIZE-CLIENT-TYPE":"web"},onUploadProgress:e=>{L[s].progress=(100*e.loaded/e.total).toFixed(0)}}).then((e=>{200==e.status&&(L[s].type="success",(0,p.z8)({message:"上传成功！",type:"success"}))})).catch((e=>{(0,p.z8)({message:"上传失败！",type:"error"}),L[s].type="error",L[s].progress=0})),L[s].isHttp=!0},B=e=>{L.splice(e,1)},q=()=>{function e(e){e.stopPropagation(),e.preventDefault()}D.value.addEventListener("dragenter",e,!1),D.value.addEventListener("dragover",e,!1),D.value.addEventListener("dragleave",e,!1),D.value.addEventListener("drop",(e=>{e.preventDefault(),e.stopPropagation();for(const t of e.dataTransfer.files)c.value(t)&&L.push({file:t,progress:0,isHttp:!1,type:""})}),!1)},F=e=>{let t=e.target.files;for(const l of t)c.value(l)&&L.push({file:l,progress:0,isHttp:!1,type:""})};return(0,o.bv)((()=>{q()})),(e,t)=>{const l=u.Xh;return(0,o.wg)(),(0,o.iD)("div",null,[(0,o._)("input",{style:{display:"none"},type:"file",id:"file",name:"file",ref_key:"file",ref:E,limit:(0,r.SU)(v),multiple:(0,r.SU)(k),accept:(0,r.SU)(C),onChange:t[0]||(t[0]=e=>F(e))},null,40,_),(0,o._)("div",{class:"up_box",ref_key:"fileEl",ref:D,onClick:W},[g,(0,o.WI)(e.$slots,"tip",{},(()=>[f,m])),(0,o.WI)(e.$slots,"default")],512),(0,o._)("div",w,[(0,o.WI)(e.$slots,"up_preview",{},(()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)((0,r.SU)(L),((e,t)=>((0,o.wg)(),(0,o.iD)("div",{class:"up_preview_item",key:t},[h,(0,o._)("div",y,[(0,o._)("span",x,(0,n.zw)(e.file.name),1),(0,o.Wm)(l,{percentage:e.progress},null,8,["percentage"])]),(0,o._)("div",{class:(0,n.C_)({up_item_none:!0,up_item_success:"success"==e.type,up_item_error:"error"==e.type})},["success"==e.type?((0,o.wg)(),(0,o.iD)("svg",z,U)):(0,o.kq)("",!0),"error"==e.type?((0,o.wg)(),(0,o.iD)("svg",H,b)):(0,o.kq)("",!0)],2),(0,o._)("div",S,[((0,o.wg)(),(0,o.iD)("svg",{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg","data-v-78e17ca8":"",onClick:e=>B(t)},I,8,P))])])))),128))]))])])}}},W=l(40089);const V=(0,W.Z)(M,[["__scopeId","data-v-2a72b297"]]);var B=V;const q={class:"upload_box"},F={class:"title"},K=(0,o.Uk)("法律法规"),O=(0,o.Uk)("制度规范");var Y={__name:"Index",setup(e){let t=(0,r.qj)({type:1}),l=(0,r.iH)([]),u=(0,r.iH)(),c=(0,r.iH)(!1);const d=sessionStorage.getItem(""),v=e=>{l.value=e};let _=(0,r.qj)({fileKey:"file",data:[{value:t.type,name:"type"}],token:d?`Bearer ${d}`:"",url:"/lzzApis_V2/lzz-business/knowledgeBase/add"});const g=e=>{let t="xls/xlsx/pdf/docx/doc",l=t.split("/"),a=e.name.split("."),s=l.includes(a[a.length-1]),o=e.size/1024/1024<=3;return!s&&(0,p.z8)({message:"只能上传xls/xlsx/pdf/docx/doc文件",type:"warning"}),!o&&(0,p.z8)({message:"上传文件单个大小不超过3M",type:"warning"}),s&&o};(0,o.YP)(l,(e=>{l.value.length?c.value=!0:c.value=!1})),(0,o.YP)((()=>t.type),(e=>{f(),_.data.forEach((t=>{"type"===t.name&&(t.value=e)}))}));const f=()=>{c.value=!1,l.value=[],u.value.clear()};return(e,l)=>{const p=(0,o.up)("Close"),d=s.gn,m=a.rh,w=a.KD;return(0,o.wg)(),(0,o.iD)("div",{class:(0,n.C_)({knowledge_upload:!0,knowledge_isUpload:(0,r.SU)(c)})},[(0,o._)("div",q,[(0,o.wy)((0,o.Wm)(d,{class:"upload_box_close",onClick:f},{default:(0,o.w5)((()=>[(0,o.Wm)(p)])),_:1},512),[[i.F8,(0,r.SU)(c)]]),(0,o.wy)((0,o._)("div",F,"上传",512),[[i.F8,(0,r.SU)(c)]]),(0,o.Wm)(B,{onChange:v,ref_key:"reference",ref:u,limit:4,multiple:!0,onProgress:g,httpOption:(0,r.SU)(_),accept:".pdf,.xls,.xlsx,.docx,.doc"},{default:(0,o.w5)((()=>[(0,o._)("div",null,[(0,o.Wm)(w,{modelValue:(0,r.SU)(t).type,"onUpdate:modelValue":l[0]||(l[0]=e=>(0,r.SU)(t).type=e),class:"ml-4",onClick:l[1]||(l[1]=e=>e.stopPropagation())},{default:(0,o.w5)((()=>[(0,o.Wm)(m,{label:1,size:"large"},{default:(0,o.w5)((()=>[K])),_:1}),(0,o.Wm)(m,{label:2,size:"large"},{default:(0,o.w5)((()=>[O])),_:1})])),_:1},8,["modelValue"])])])),_:1},8,["httpOption"])])],2)}}};const j=(0,W.Z)(Y,[["__scopeId","data-v-d0d1caa4"]]);var A=j},11758:function(){},72942:function(e,t,l){l(11758)},83429:function(e,t,l){l(11758)}}]);
//# sourceMappingURL=421.a9375f99.js.map