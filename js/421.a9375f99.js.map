{"version":3,"file":"js/421.a9375f99.js","mappings":"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","sources":["webpack://vue-demo-gather/./src/views/InfiniteList/dorpFile/DropUpload.vue","webpack://vue-demo-gather/./src/views/InfiniteList/dorpFile/DropUpload.vue?7c7d","webpack://vue-demo-gather/./src/views/InfiniteList/dorpFile/Index.vue","webpack://vue-demo-gather/./src/views/InfiniteList/dorpFile/Index.vue?8062"],"sourcesContent":["import { unref as _unref, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, renderSlot as _renderSlot, createTextVNode as _createTextVNode, renderList as _renderList, Fragment as _Fragment, toDisplayString as _toDisplayString, resolveComponent as _resolveComponent, createVNode as _createVNode, createCommentVNode as _createCommentVNode, normalizeClass as _normalizeClass, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-2a72b297\"), n = n(), _popScopeId(), n);\n\nconst _hoisted_1 = [\"limit\", \"multiple\", \"accept\"];\n\nconst _hoisted_2 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"up_svg\"\n}, [/*#__PURE__*/_createElementVNode(\"svg\", {\n  viewBox: \"0 0 1024 1024\",\n  xmlns: \"http://www.w3.org/2000/svg\"\n}, [/*#__PURE__*/_createElementVNode(\"path\", {\n  fill: \"currentColor\",\n  d: \"M544 864V672h128L512 480 352 672h128v192H320v-1.6c-5.376.32-10.496 1.6-16 1.6A240 240 0 0 1 64 624c0-123.136 93.12-223.488 212.608-237.248A239.808 239.808 0 0 1 512 192a239.872 239.872 0 0 1 235.456 194.752c119.488 13.76 212.48 114.112 212.48 237.248a240 240 0 0 1-240 240c-5.376 0-10.56-1.28-16-1.6v1.6H544z\"\n})])], -1));\n\nconst _hoisted_3 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"up__text\"\n}, [/*#__PURE__*/_createTextVNode(\" 将文件拖到此区域，或 \"), /*#__PURE__*/_createElementVNode(\"em\", null, \"点击上传\")], -1));\n\nconst _hoisted_4 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"up_tip\"\n}, \" 文件格式为.pdf,.xls,.xlsx,.docx,.doc，每个附件大小不能超过3M \", -1));\n\nconst _hoisted_5 = {\n  class: \"up_preview\"\n};\n\nconst _hoisted_6 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"svg\", {\n  viewBox: \"0 0 1024 1024\",\n  xmlns: \"http://www.w3.org/2000/svg\",\n  \"data-v-78e17ca8\": \"\"\n}, [/*#__PURE__*/_createElementVNode(\"path\", {\n  fill: \"currentColor\",\n  d: \"M832 384H576V128H192v768h640V384zm-26.496-64L640 154.496V320h165.504zM160 64h480l256 256v608a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V96a32 32 0 0 1 32-32zm160 448h384v64H320v-64zm0-192h160v64H320v-64zm0 384h384v64H320v-64z\"\n})], -1));\n\nconst _hoisted_7 = {\n  class: \"up_jd\"\n};\nconst _hoisted_8 = {\n  class: \"up_item_name\"\n};\nconst _hoisted_9 = {\n  key: 0,\n  viewBox: \"0 0 1024 1024\",\n  xmlns: \"http://www.w3.org/2000/svg\"\n};\n\nconst _hoisted_10 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"path\", {\n  fill: \"currentColor\",\n  d: \"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768zm0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896z\"\n}, null, -1));\n\nconst _hoisted_11 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"path\", {\n  fill: \"currentColor\",\n  d: \"M745.344 361.344a32 32 0 0 1 45.312 45.312l-288 288a32 32 0 0 1-45.312 0l-160-160a32 32 0 1 1 45.312-45.312L480 626.752l265.344-265.408z\"\n}, null, -1));\n\nconst _hoisted_12 = [_hoisted_10, _hoisted_11];\nconst _hoisted_13 = {\n  key: 1,\n  viewBox: \"0 0 1024 1024\",\n  xmlns: \"http://www.w3.org/2000/svg\"\n};\n\nconst _hoisted_14 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"path\", {\n  fill: \"currentColor\",\n  d: \"m466.752 512-90.496-90.496a32 32 0 0 1 45.248-45.248L512 466.752l90.496-90.496a32 32 0 1 1 45.248 45.248L557.248 512l90.496 90.496a32 32 0 1 1-45.248 45.248L512 557.248l-90.496 90.496a32 32 0 0 1-45.248-45.248L466.752 512z\"\n}, null, -1));\n\nconst _hoisted_15 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"path\", {\n  fill: \"currentColor\",\n  d: \"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768zm0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896z\"\n}, null, -1));\n\nconst _hoisted_16 = [_hoisted_14, _hoisted_15];\nconst _hoisted_17 = {\n  class: \"up_item_clos\"\n};\nconst _hoisted_18 = [\"onClick\"];\n\nconst _hoisted_19 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"path\", {\n  fill: \"currentColor\",\n  d: \"M764.288 214.592 512 466.88 259.712 214.592a31.936 31.936 0 0 0-45.12 45.12L466.752 512 214.528 764.224a31.936 31.936 0 1 0 45.12 45.184L512 557.184l252.288 252.288a31.936 31.936 0 0 0 45.12-45.12L557.12 512.064l252.288-252.352a31.936 31.936 0 1 0-45.12-45.184z\"\n}, null, -1));\n\nconst _hoisted_20 = [_hoisted_19];\nimport { ref, reactive, onMounted, watch, toRaw, toRefs } from 'vue';\nimport { ElMessage } from 'element-plus'; // import http, { BASE_NAME, ResponseCode } from '@/utils/request';\n\nimport axios from 'axios'; // import axios from \"axios\";\n// 用来处理拖拽 点击上传的文件例子\n\nexport default {\n  __name: 'DropUpload',\n  props: {\n    httpOption: {\n      // 网络请求相关配置 需要 url ，data ，token，file\n      default: () => {\n        return {};\n      }\n    },\n    accept: {\n      default: '*'\n    },\n    limit: {\n      default: ''\n    },\n    multiple: {\n      default: false\n    },\n    onProgress: {\n      default: () => {\n        return () => {\n          return true;\n        };\n      },\n      type: Function,\n      required: false\n    }\n  },\n  emits: ['change', 'clear'],\n\n  setup(__props, {\n    expose,\n    emit\n  }) {\n    const props = __props;\n    let {\n      type,\n      httpOption,\n      onProgress,\n      limit,\n      multiple,\n      accept\n    } = toRefs(props); // 上传的文件\n\n    let fileList = reactive([]);\n    let fileEl = ref();\n    let file = ref();\n    watch(fileList, e => {\n      let aa = toRaw(e);\n      emit('change', // aa.map((item) => item.file)\n      aa);\n\n      if (!httpOption.value.url) {\n        emit('change', aa);\n      } else {\n        for (let index = 0; index < aa.length; index++) {\n          const el = aa[index];\n          uploadFill(el, index);\n        }\n      }\n    }, {\n      deep: true\n    });\n\n    const clear = () => {\n      fileList.splice(0, fileList.length);\n    }; // 暴露初始化数据方法\n\n\n    expose({\n      clear\n    }); // 模拟点击input\n\n    const uploadFilled = e => {\n      file.value.click();\n    }; // 上传至指定位置\n\n\n    const uploadFill = async ({\n      file,\n      isHttp,\n      progress,\n      type\n    }, i) => {\n      if (isHttp) return;\n      let {\n        url,\n        data,\n        fileKey,\n        token\n      } = httpOption.value;\n      const formData = new FormData();\n      formData.append(fileKey, file);\n      data.forEach(item => {\n        formData.append(item.name, item.value);\n      });\n      axios({\n        method: 'post',\n        url,\n        data: formData,\n        headers: {\n          Authorization: token ?? '',\n          'CUSTOMIZE-CLIENT-TYPE': 'web'\n        },\n        onUploadProgress: progress => {\n          fileList[i].progress = (progress.loaded * 100 / progress.total).toFixed(0);\n        }\n      }).then(res => {\n        if (res.status == 200) {\n          fileList[i].type = 'success';\n          ElMessage({\n            message: '上传成功！',\n            type: 'success'\n          });\n        }\n      }).catch(err => {\n        ElMessage({\n          message: '上传失败！',\n          type: 'error'\n        });\n        fileList[i].type = 'error';\n        fileList[i].progress = 0;\n      });\n      fileList[i].isHttp = true;\n    };\n\n    const closClick = i => {\n      fileList.splice(i, 1);\n    }; // 注册drop事件\n\n\n    const init = () => {\n      fileEl.value.addEventListener('dragenter', dragover, false);\n      fileEl.value.addEventListener('dragover', dragover, false);\n      fileEl.value.addEventListener('dragleave', dragover, false);\n\n      function dragover(e) {\n        e.stopPropagation();\n        e.preventDefault();\n      } // 处理拖拽文件\n\n\n      fileEl.value.addEventListener('drop', event => {\n        event.preventDefault();\n        event.stopPropagation();\n\n        for (const f of event.dataTransfer.files) {\n          // 先通过校验\n          onProgress.value(f) && fileList.push({\n            file: f,\n            // 文件\n            progress: 0,\n            //进度\n            isHttp: false,\n            // 是否已上传\n            type: '' // 上传状态\n\n          });\n        }\n      }, false);\n    }; //原生input change\n\n\n    const fileChange = event => {\n      let files = event.target.files;\n\n      for (const f of files) {\n        // 先通过校验在添加进数组\n        onProgress.value(f) && fileList.push({\n          file: f,\n          // 文件\n          progress: 0,\n          //进度\n          isHttp: false,\n          // 是否已上传\n          type: '' // 上传状态\n\n        });\n      }\n    };\n\n    onMounted(() => {\n      init();\n    });\n    return (_ctx, _cache) => {\n      const _component_el_progress = _resolveComponent(\"el-progress\");\n\n      return _openBlock(), _createElementBlock(\"div\", null, [_createElementVNode(\"input\", {\n        style: {\n          \"display\": \"none\"\n        },\n        type: \"file\",\n        id: \"file\",\n        name: \"file\",\n        ref_key: \"file\",\n        ref: file,\n        limit: _unref(limit),\n        multiple: _unref(multiple),\n        accept: _unref(accept),\n        onChange: _cache[0] || (_cache[0] = $event => fileChange($event))\n      }, null, 40, _hoisted_1), _createElementVNode(\"div\", {\n        class: \"up_box\",\n        ref_key: \"fileEl\",\n        ref: fileEl,\n        onClick: uploadFilled\n      }, [_hoisted_2, _renderSlot(_ctx.$slots, \"tip\", {}, () => [_hoisted_3, _hoisted_4]), _renderSlot(_ctx.$slots, \"default\")], 512), _createElementVNode(\"div\", _hoisted_5, [_renderSlot(_ctx.$slots, \"up_preview\", {}, () => [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(fileList), (item, key) => {\n        return _openBlock(), _createElementBlock(\"div\", {\n          class: \"up_preview_item\",\n          key: key\n        }, [_hoisted_6, _createElementVNode(\"div\", _hoisted_7, [_createElementVNode(\"span\", _hoisted_8, _toDisplayString(item.file.name), 1), _createVNode(_component_el_progress, {\n          percentage: item.progress\n        }, null, 8, [\"percentage\"])]), _createElementVNode(\"div\", {\n          class: _normalizeClass({\n            up_item_none: true,\n            up_item_success: item.type == 'success',\n            up_item_error: item.type == 'error'\n          })\n        }, [item.type == 'success' ? (_openBlock(), _createElementBlock(\"svg\", _hoisted_9, _hoisted_12)) : _createCommentVNode(\"\", true), item.type == 'error' ? (_openBlock(), _createElementBlock(\"svg\", _hoisted_13, _hoisted_16)) : _createCommentVNode(\"\", true)], 2), _createElementVNode(\"div\", _hoisted_17, [(_openBlock(), _createElementBlock(\"svg\", {\n          viewBox: \"0 0 1024 1024\",\n          xmlns: \"http://www.w3.org/2000/svg\",\n          \"data-v-78e17ca8\": \"\",\n          onClick: $event => closClick(key)\n        }, _hoisted_20, 8, _hoisted_18))])]);\n      }), 128))])])]);\n    };\n  }\n\n};","/* unplugin-vue-components disabled */import script from \"./DropUpload.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./DropUpload.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./DropUpload.vue?vue&type=style&index=0&id=2a72b297&scoped=true&lang=scss\"\n\nimport exportComponent from \"C:\\\\Users\\\\Administrator\\\\Desktop\\\\mycode\\\\vue-demo-gather\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-2a72b297\"]])\n\nexport default __exports__","import \"core-js/modules/es.array.includes.js\";\nimport { unref as _unref, resolveComponent as _resolveComponent, createVNode as _createVNode, vShow as _vShow, withCtx as _withCtx, withDirectives as _withDirectives, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, normalizeClass as _normalizeClass, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-d0d1caa4\"), n = n(), _popScopeId(), n);\n\nconst _hoisted_1 = {\n  class: \"upload_box\"\n};\nconst _hoisted_2 = {\n  class: \"title\"\n};\n\nconst _hoisted_3 = /*#__PURE__*/_createTextVNode(\"法律法规\");\n\nconst _hoisted_4 = /*#__PURE__*/_createTextVNode(\"制度规范\");\n\nimport { ref, reactive, watch } from 'vue';\nimport { ElMessage } from 'element-plus';\nimport DropUpload from './DropUpload.vue'; // import { LOCAL_STORAGE } from '@/utils/request';\n\nexport default {\n  __name: 'Index',\n\n  setup(__props) {\n    let formInline = reactive({\n      type: 1\n    });\n    let fileList = ref([]);\n    let reference = ref();\n    let isUpload = ref(false);\n    const token = sessionStorage.getItem('');\n\n    const change = e => {\n      fileList.value = e;\n    };\n\n    let httpOption = reactive({\n      fileKey: 'file',\n      data: [{\n        value: formInline.type,\n        name: 'type'\n      }],\n      token: token ? `Bearer ${token}` : '',\n      url: '/lzzApis_V2/lzz-business/knowledgeBase/add'\n    });\n\n    const onProgress = e => {\n      let str = 'xls/xlsx/pdf/docx/doc';\n      let strArr = str.split('/');\n      let nameArr = e.name.split('.');\n      let isOk = strArr.includes(nameArr[nameArr.length - 1]);\n      let isSize = e.size / 1024 / 1024 <= 3;\n      !isOk && ElMessage({\n        message: '只能上传xls/xlsx/pdf/docx/doc文件',\n        type: 'warning'\n      });\n      !isSize && ElMessage({\n        message: '上传文件单个大小不超过3M',\n        type: 'warning'\n      });\n      return isOk && isSize;\n    };\n\n    watch(fileList, e => {\n      if (fileList.value.length) {\n        isUpload.value = true;\n      } else {\n        isUpload.value = false;\n      }\n    });\n    watch(() => formInline.type, e => {\n      handleClose();\n      httpOption.data.forEach(item => {\n        item.name === 'type' && (item.value = e);\n      });\n    });\n\n    const handleClose = () => {\n      isUpload.value = false;\n      fileList.value = [];\n      reference.value.clear();\n    };\n\n    return (_ctx, _cache) => {\n      const _component_Close = _resolveComponent(\"Close\");\n\n      const _component_el_icon = _resolveComponent(\"el-icon\");\n\n      const _component_el_radio = _resolveComponent(\"el-radio\");\n\n      const _component_el_radio_group = _resolveComponent(\"el-radio-group\");\n\n      return _openBlock(), _createElementBlock(\"div\", {\n        class: _normalizeClass({\n          knowledge_upload: true,\n          knowledge_isUpload: _unref(isUpload)\n        })\n      }, [_createElementVNode(\"div\", _hoisted_1, [_withDirectives(_createVNode(_component_el_icon, {\n        class: \"upload_box_close\",\n        onClick: handleClose\n      }, {\n        default: _withCtx(() => [_createVNode(_component_Close)]),\n        _: 1\n      }, 512), [[_vShow, _unref(isUpload)]]), _withDirectives(_createElementVNode(\"div\", _hoisted_2, \"上传\", 512), [[_vShow, _unref(isUpload)]]), _createVNode(DropUpload, {\n        onChange: change,\n        ref_key: \"reference\",\n        ref: reference,\n        limit: 4,\n        multiple: true,\n        onProgress: onProgress,\n        httpOption: _unref(httpOption),\n        accept: \".pdf,.xls,.xlsx,.docx,.doc\"\n      }, {\n        default: _withCtx(() => [_createElementVNode(\"div\", null, [_createVNode(_component_el_radio_group, {\n          modelValue: _unref(formInline).type,\n          \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => _unref(formInline).type = $event),\n          class: \"ml-4\",\n          onClick: _cache[1] || (_cache[1] = e => e.stopPropagation())\n        }, {\n          default: _withCtx(() => [_createVNode(_component_el_radio, {\n            label: 1,\n            size: \"large\"\n          }, {\n            default: _withCtx(() => [_hoisted_3]),\n            _: 1\n          }), _createVNode(_component_el_radio, {\n            label: 2,\n            size: \"large\"\n          }, {\n            default: _withCtx(() => [_hoisted_4]),\n            _: 1\n          })]),\n          _: 1\n        }, 8, [\"modelValue\"])])]),\n        _: 1\n      }, 8, [\"httpOption\"])])], 2);\n    };\n  }\n\n};","/* unplugin-vue-components disabled */import script from \"./Index.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Index.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./Index.vue?vue&type=style&index=0&id=d0d1caa4&scoped=true&lang=scss\"\n\nimport exportComponent from \"C:\\\\Users\\\\Administrator\\\\Desktop\\\\mycode\\\\vue-demo-gather\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-d0d1caa4\"]])\n\nexport default __exports__"],"names":["_withScopeId","n","_hoisted_1","_hoisted_2","_","class","viewBox","xmlns","fill","d","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","key","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","__name","props","httpOption","default","accept","limit","multiple","onProgress","type","Function","required","emits","setup","__props","expose","emit","fileList","fileEl","file","e","aa","value","url","index","length","el","uploadFill","deep","clear","splice","uploadFilled","click","async","isHttp","progress","i","data","fileKey","token","formData","FormData","append","forEach","item","name","method","headers","Authorization","onUploadProgress","loaded","total","toFixed","then","res","status","message","catch","err","closClick","init","dragover","stopPropagation","preventDefault","addEventListener","event","f","dataTransfer","files","push","fileChange","target","_ctx","_cache","_component_el_progress","style","id","ref_key","ref","onChange","$event","onClick","$slots","percentage","up_item_none","up_item_success","up_item_error","__exports__","formInline","reference","isUpload","sessionStorage","getItem","change","str","strArr","split","nameArr","isOk","includes","isSize","size","handleClose","_component_Close","_component_el_icon","_component_el_radio","_component_el_radio_group","knowledge_upload","knowledge_isUpload","DropUpload","modelValue","label"],"sourceRoot":""}